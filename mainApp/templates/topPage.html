<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>トップページ</title>
    <script>
      function twoDigit(num) {
        let ret;
        if (num < 10) ret = "0" + num;
        else ret = num;
        return ret;
      }
      function showClock() {
        let nowTime = new Date();
        let nowHour = twoDigit(nowTime.getHours());
        let nowMin = twoDigit(nowTime.getMinutes());
        let nowSec = twoDigit(nowTime.getSeconds());
        let msg = "現在時刻：" + nowHour + ":" + nowMin + ":" + nowSec;
        document.getElementById("realtime").innerHTML = msg;
      }
      setInterval("showClock()", 1000);
    </script>
  </head>
  <body>
    <h1>トップページ</h1>
    <div>
      <p>お疲れ様です、{{ user_name }}さん。</p>
      <p id="realtime"></p>
    </div>

    {% if messages %}
    <div>
      {% for message in messages %}
      <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
    {% endif %}

    <div>
      <p>今日の勤務時間: {{ worked_hours }} 時間</p>
      <form method="post" action="">
        {% csrf_token %}
        <input type="submit" name="clock_in" value="出勤" />
      </form>
      <form method="post" action="">
        {% csrf_token %}
        <input type="submit" name="clock_out" value="退勤" />
      </form>
      <a href="{% url 'upload_shifts' %}" class="button"
        >シフトアップロードページ</a
      >
    </div>
    <a href="{% url 'logout' %}">ログアウト</a>
  </body>
</html>
